You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
Error [ERR_MODULE_NOT_FOUND]: Cannot find package 'express' imported from /perform1/srv/work/myid-app/backend/server.mjs
    at Object.getPackageJSONURL (node:internal/modules/package_json_reader:314:9)
    at packageResolve (node:internal/modules/esm/resolve:767:81)
    at moduleResolve (node:internal/modules/esm/resolve:853:18)
    at defaultResolve (node:internal/modules/esm/resolve:983:11)
    at #cachedDefaultResolve (node:internal/modules/esm/loader:731:20)
    at ModuleLoader.resolve (node:internal/modules/esm/loader:708:38)
    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:310:38)
    at ModuleJob._link (node:internal/modules/esm/module_job:182:49)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
Error [ERR_PACKAGE_PATH_NOT_EXPORTED]: Package subpath './blake3' is not defined by "exports" in /perform1/srv/work/myid-app/backend/node_modules/@noble/hashes/package.json imported from /perform1/srv/work/myid-app/backend/routes/mastercode.mjs
    at exportsNotFound (node:internal/modules/esm/resolve:313:10)
    at packageExportsResolve (node:internal/modules/esm/resolve:660:9)
    at packageResolve (node:internal/modules/esm/resolve:773:12)
    at moduleResolve (node:internal/modules/esm/resolve:853:18)
    at defaultResolve (node:internal/modules/esm/resolve:983:11)
    at #cachedDefaultResolve (node:internal/modules/esm/loader:731:20)
    at ModuleLoader.resolve (node:internal/modules/esm/loader:708:38)
    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:310:38)
    at ModuleJob._link (node:internal/modules/esm/module_job:182:49)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2026-01-17 18:08:02 +04:00: Redis cluster error: Failed to refresh slots cache.
2026-01-17 18:08:02 +04:00: Redis cluster error: Failed to refresh slots cache.
2026-01-17 18:08:03 +04:00: Redis cluster error: Failed to refresh slots cache.
2026-01-17 18:08:03 +04:00: Redis cluster error: Failed to refresh slots cache.
2026-01-17 18:08:03 +04:00: Redis cluster connection failed after 3 retries
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
Error [ERR_PACKAGE_PATH_NOT_EXPORTED]: Package subpath './blake3' is not defined by "exports" in /perform1/srv/work/myid-app/backend/node_modules/@noble/hashes/package.json imported from /perform1/srv/work/myid-app/backend/routes/trustcode.mjs
    at exportsNotFound (node:internal/modules/esm/resolve:313:10)
    at packageExportsResolve (node:internal/modules/esm/resolve:660:9)
    at packageResolve (node:internal/modules/esm/resolve:773:12)
    at moduleResolve (node:internal/modules/esm/resolve:853:18)
    at defaultResolve (node:internal/modules/esm/resolve:983:11)
    at #cachedDefaultResolve (node:internal/modules/esm/loader:731:20)
    at ModuleLoader.resolve (node:internal/modules/esm/loader:708:38)
    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:310:38)
    at ModuleJob._link (node:internal/modules/esm/module_job:182:49)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
Error [ERR_PACKAGE_PATH_NOT_EXPORTED]: Package subpath './blake3' is not defined by "exports" in /perform1/srv/work/myid-app/backend/node_modules/@noble/hashes/package.json imported from /perform1/srv/work/myid-app/backend/routes/trustcode.mjs
    at exportsNotFound (node:internal/modules/esm/resolve:313:10)
    at packageExportsResolve (node:internal/modules/esm/resolve:660:9)
    at packageResolve (node:internal/modules/esm/resolve:773:12)
    at moduleResolve (node:internal/modules/esm/resolve:853:18)
    at defaultResolve (node:internal/modules/esm/resolve:983:11)
    at #cachedDefaultResolve (node:internal/modules/esm/loader:731:20)
    at ModuleLoader.resolve (node:internal/modules/esm/loader:708:38)
    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:310:38)
    at ModuleJob._link (node:internal/modules/esm/module_job:182:49)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2026-01-17 18:10:20 +04:00: Redis error: read ECONNRESET
2026-01-17 18:10:20 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:10:21 +04:00: Redis error: write ECONNRESET
2026-01-17 18:10:21 +04:00: Redis error: read ECONNRESET
2026-01-17 18:10:22 +04:00: Redis error: write ECONNRESET
2026-01-17 18:10:22 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:10:24 +04:00: Query error: {
  text: 'SELECT NOW() as time, current_database() as database',
  error: 'connect ECONNREFUSED 127.0.0.1:5432'
}
2026-01-17 18:11:18 +04:00: Error closing Redis connection: Connection is closed.
2026-01-17 18:11:19 +04:00: Redis error: read ECONNRESET
2026-01-17 18:11:19 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:11:19 +04:00: Redis error: write ECONNRESET
2026-01-17 18:11:19 +04:00: Redis error: write ECONNRESET
2026-01-17 18:11:20 +04:00: Redis error: write ECONNRESET
2026-01-17 18:11:20 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:11:23 +04:00: Query error: {
  text: 'SELECT NOW() as time, current_database() as database',
  error: 'connect ENOENT /var/run/postgresql/.s.PGSQL.5432'
}
2026-01-17 18:12:32 +04:00: Error closing Redis connection: Connection is closed.
2026-01-17 18:12:32 +04:00: Redis error: read ECONNRESET
2026-01-17 18:12:32 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:12:32 +04:00: Redis error: write ECONNRESET
2026-01-17 18:12:33 +04:00: Redis error: write ECONNRESET
2026-01-17 18:12:33 +04:00: Redis error: write ECONNRESET
2026-01-17 18:12:33 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:12:36 +04:00: Query error: {
  text: 'SELECT NOW() as time, current_database() as database',
  error: 'connect ENOENT /var/run/postgresql/.s.PGSQL.5432'
}
2026-01-17 18:15:40 +04:00: Query error: {
  text: 'SELECT NOW() as time, current_database() as database',
  error: 'connect ENOENT /var/run/postgresql/.s.PGSQL.5432'
}
2026-01-17 18:16:02 +04:00: Error closing Redis connection: Connection is closed.
2026-01-17 18:16:03 +04:00: Redis error: read ECONNRESET
2026-01-17 18:16:03 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:16:03 +04:00: Redis error: write ECONNRESET
2026-01-17 18:16:03 +04:00: Redis error: write ECONNRESET
2026-01-17 18:16:04 +04:00: Redis error: write ECONNRESET
2026-01-17 18:16:04 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:16:39 +04:00: Error closing Redis connection: Connection is closed.
2026-01-17 18:16:39 +04:00: Redis error: read ECONNRESET
2026-01-17 18:16:39 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:16:40 +04:00: Redis error: write ECONNRESET
2026-01-17 18:16:40 +04:00: Redis error: write ECONNRESET
2026-01-17 18:16:41 +04:00: Redis error: write ECONNRESET
2026-01-17 18:16:41 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:16:47 +04:00: Query error: {
  text: 'SELECT NOW() as time, current_database() as database',
  error: 'connect EHOSTUNREACH 192.168.0.5:5432'
}
2026-01-17 18:16:50 +04:00: Error closing Redis connection: Connection is closed.
2026-01-17 18:16:50 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:16:52 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:17:17 +04:00: Query error: {
  text: 'SELECT NOW() as time, current_database() as database',
  error: 'connect EHOSTUNREACH 192.168.0.5:5432'
}
2026-01-17 18:17:38 +04:00: Error closing Redis connection: Connection is closed.
2026-01-17 18:17:39 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:17:40 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:17:45 +04:00: Query error: {
  text: 'SELECT NOW() as time, current_database() as database',
  error: 'connect EHOSTUNREACH 192.168.0.5:5432'
}
2026-01-17 18:17:51 +04:00: Error closing Redis connection: Connection is closed.
2026-01-17 18:17:52 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:17:53 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:17:56 +04:00: Query error: {
  text: 'SELECT NOW() as time, current_database() as database',
  error: 'connect ECONNREFUSED 127.0.0.1:5432'
}
2026-01-17 18:17:59 +04:00: Query error: {
  text: 'SELECT NOW() as time, current_database() as database',
  error: 'connect ECONNREFUSED 127.0.0.1:5432'
}
2026-01-17 18:18:17 +04:00: Error closing Redis connection: Connection is closed.
2026-01-17 18:18:17 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:18:19 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:18:25 +04:00: Query error: {
  text: 'SELECT NOW() as time, current_database() as database',
  error: 'certificate has expired'
}
2026-01-17 18:18:42 +04:00: Error closing Redis connection: Connection is closed.
2026-01-17 18:18:42 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:18:44 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:19:16 +04:00: Server error: SyntaxError: Bad escaped character in JSON at position 48 (line 1 column 49)
    at JSON.parse (<anonymous>)
    at parse (/perform1/srv/work/myid-app/backend/node_modules/body-parser/lib/types/json.js:92:19)
    at /perform1/srv/work/myid-app/backend/node_modules/body-parser/lib/read.js:128:18
    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
    at invokeCallback (/perform1/srv/work/myid-app/backend/node_modules/raw-body/index.js:238:16)
    at done (/perform1/srv/work/myid-app/backend/node_modules/raw-body/index.js:227:7)
    at IncomingMessage.onEnd (/perform1/srv/work/myid-app/backend/node_modules/raw-body/index.js:287:7)
    at IncomingMessage.emit (node:events:519:28)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  expose: true,
  statusCode: 400,
  status: 400,
  body: '{"email":"test@myid.africa","password":"Test123\\!"}',
  type: 'entity.parse.failed'
}
2026-01-17 18:19:50 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:19:51 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:20:20 +04:00: TrustCode issue error: Error: expected Uint8Array, got type=string
    at abytes (file:///perform1/srv/work/myid-app/backend/node_modules/@noble/hashes/utils.js:26:15)
    at _BLAKE3.update (file:///perform1/srv/work/myid-app/backend/node_modules/@noble/hashes/blake2.js:99:9)
    at hashC (file:///perform1/srv/work/myid-app/backend/node_modules/@noble/hashes/utils.js:223:49)
    at generateTrustCode (file:///perform1/srv/work/myid-app/backend/routes/trustcode.mjs:62:16)
    at file:///perform1/srv/work/myid-app/backend/routes/trustcode.mjs:143:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2026-01-17 18:20:27 +04:00: Error closing Redis connection: Connection is closed.
2026-01-17 18:20:27 +04:00: Redis error: read ECONNRESET
2026-01-17 18:20:27 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:20:28 +04:00: Redis error: write ECONNRESET
2026-01-17 18:20:28 +04:00: Redis error: write ECONNRESET
2026-01-17 18:20:29 +04:00: Redis error: write ECONNRESET
2026-01-17 18:20:29 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:20:45 +04:00: Error closing Redis connection: Connection is closed.
2026-01-17 18:20:45 +04:00: Redis error: read ECONNRESET
2026-01-17 18:20:45 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:20:45 +04:00: Redis error: write ECONNRESET
2026-01-17 18:20:46 +04:00: Redis error: write ECONNRESET
2026-01-17 18:20:46 +04:00: Redis error: write ECONNRESET
2026-01-17 18:20:46 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:20:57 +04:00: Query error: {
  text: 'INSERT INTO trustcodes (trustcode, mastercode, status)\n' +
    "       VALUES ($1, $2, 'active')",
  error: 'value too long for type character(9)'
}
2026-01-17 18:20:57 +04:00: TrustCode issue error: error: value too long for type character(9)
    at /perform1/srv/work/myid-app/backend/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Object.query (file:///perform1/srv/work/myid-app/backend/lib/db.mjs:78:20)
    at async file:///perform1/srv/work/myid-app/backend/routes/trustcode.mjs:159:5 {
  length: 88,
  severity: 'ERROR',
  code: '22001',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'varchar.c',
  line: '310',
  routine: 'bpchar'
}
2026-01-17 18:21:15 +04:00: Error closing Redis connection: Connection is closed.
2026-01-17 18:21:15 +04:00: Redis error: read ECONNRESET
2026-01-17 18:21:15 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:21:15 +04:00: Redis error: write ECONNRESET
2026-01-17 18:21:16 +04:00: Redis error: write ECONNRESET
2026-01-17 18:21:16 +04:00: Redis error: write ECONNRESET
2026-01-17 18:21:16 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:24:57 +04:00: Error closing Redis connection: Connection is closed.
2026-01-17 18:24:57 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:24:58 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:25:06 +04:00: Query error: {
  text: 'SELECT NOW() as time, current_database() as database',
  error: 'connect ENOENT /var/run/postgresql/.s.PGSQL.5432'
}
2026-01-17 18:27:52 +04:00: Error closing Redis connection: Connection is closed.
2026-01-17 18:27:52 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 18:27:53 +04:00: Redis connection failed after 3 retries, using in-memory fallback
2026-01-17 18:41:12 +04:00: Error closing Redis connection: Connection is closed.
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
Error [ERR_PACKAGE_PATH_NOT_EXPORTED]: Package subpath './blake3' is not defined by "exports" in /perform1/srv/work/myid-app/backend/node_modules/@noble/hashes/package.json imported from /perform1/srv/work/myid-app/backend/lib/selective-disclosure.mjs
    at exportsNotFound (node:internal/modules/esm/resolve:313:10)
    at packageExportsResolve (node:internal/modules/esm/resolve:660:9)
    at packageResolve (node:internal/modules/esm/resolve:773:12)
    at moduleResolve (node:internal/modules/esm/resolve:853:18)
    at defaultResolve (node:internal/modules/esm/resolve:983:11)
    at #cachedDefaultResolve (node:internal/modules/esm/loader:731:20)
    at ModuleLoader.resolve (node:internal/modules/esm/loader:708:38)
    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:310:38)
    at ModuleJob._link (node:internal/modules/esm/module_job:182:49)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2026-01-17 19:24:39 +04:00: Redis connection failed: Connection is closed. - using in-memory fallback
2026-01-17 19:24:40 +04:00: Redis connection failed after 3 retries, using in-memory fallback
